<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>Struts2 | Cying</title><meta name="description" content="Struts2"><meta name="keywords" content="JavaEE"><meta name="author" content="Cying-承影"><meta name="copyright" content="Cying-承影"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Struts2"><meta name="twitter:description" content="Struts2"><meta name="twitter:image" content="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=2597327423,2034793762&amp;fm=26&amp;gp=0.jpg"><meta property="og:type" content="article"><meta property="og:title" content="Struts2"><meta property="og:url" content="http://cyingk.github.io/2020/02/01/Struts2/"><meta property="og:site_name" content="Cying"><meta property="og:description" content="Struts2"><meta property="og:image" content="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=2597327423,2034793762&amp;fm=26&amp;gp=0.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="canonical" href="http://cyingk.github.io/2020/02/01/Struts2/"><link rel="prev" title="Vuforia" href="http://cyingk.github.io/2020/02/07/Vuforia/"><link rel="next" title="Http Servlet" href="http://cyingk.github.io/2020/01/31/Http_Servlet/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://narpro.top/","msgToTraditionalChinese":"简","msgToSimplifiedChinese":"简"},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: 'Press',
    message_next: 'to bookmark this page'
  },
  runtime_unit: 'days',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: true,
  fancybox: true,
  Snackbar: {"bookmark":{"title":"Snackbar.bookmark.title","message_prev":"Press","message_next":"to bookmark this page"},"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Light Mode Activated Manually","night_to_day":"Dark Mode Activated Manually","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  baiduPush: false,
  isHome: false,
  isPost: true
  
}</script><meta name="generator" content="Hexo 4.2.0"></head><body><canvas class="fireworks"></canvas><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Cying</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div></div></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">15</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">Tags</div><div class="length_num">8</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">Categories</div><div class="length_num">3</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">Catalog</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-text">Struts</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#一、Struts2-概述"><span class="toc_mobile_items-text">一、Struts2 概述</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#1-1-简单案例"><span class="toc_mobile_items-text">1.1 - 简单案例</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-1-1-引入-Jar-包"><span class="toc_mobile_items-text">1.1.1 - 引入 Jar 包</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-1-2-新建-struts-xml"><span class="toc_mobile_items-text">1.1.2 - 新建 struts.xml</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-1-3-配置-action"><span class="toc_mobile_items-text">1.1.3 - 配置 action</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-1-4-配置-filter"><span class="toc_mobile_items-text">1.1.4 - 配置 filter</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-1-5-书写-Java-文件"><span class="toc_mobile_items-text">1.1.5 - 书写 Java 文件</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#1-2-过滤器"><span class="toc_mobile_items-text">1.2 - 过滤器</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#三、数据封装"><span class="toc_mobile_items-text">三、数据封装</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#3-1-属性驱动"><span class="toc_mobile_items-text">3.1 - 属性驱动</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#3-2-模型驱动"><span class="toc_mobile_items-text">3.2 - 模型驱动</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-3-1-向值栈放对象"><span class="toc_mobile_items-text">4.3.1 - 向值栈放对象</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-3-2-向值栈放-List-对象"><span class="toc_mobile_items-text">4.3.2 - 向值栈放 List 对象</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#4-4-从值栈获取数据"><span class="toc_mobile_items-text">4.4 - 从值栈获取数据</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-4-1-获取字符串"><span class="toc_mobile_items-text">4.4.1 - 获取字符串</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-4-2-获取对象"><span class="toc_mobile_items-text">4.4.2 - 获取对象</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-4-3-获取-List-对象"><span class="toc_mobile_items-text">4.4.3 - 获取 List 对象</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-4-4-其他操作"><span class="toc_mobile_items-text">4.4.4 - 其他操作</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#获取-setter-方法存放的数据"><span class="toc_mobile_items-text">- 获取 setter 方法存放的数据</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#获取-push-方法存放的数据"><span class="toc_mobile_items-text">- 获取 push 方法存放的数据</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#4-5-两种符号的使用"><span class="toc_mobile_items-text">4.5 - 两种符号的使用</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-5-1"><span class="toc_mobile_items-text">4.5.1 -</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-5-2"><span class="toc_mobile_items-text">4.5.2 - %</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#五、拦截器"><span class="toc_mobile_items-text">五、拦截器</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#5-1-概述"><span class="toc_mobile_items-text">5.1 - 概述</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#5-2-底层原理"><span class="toc_mobile_items-text">5.2 - 底层原理</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#5-3-重要的概念"><span class="toc_mobile_items-text">5.3 - 重要的概念</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-3-1-过滤器和拦截器"><span class="toc_mobile_items-text">5.3.1 - 过滤器和拦截器</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-3-2-Servlet-和-action"><span class="toc_mobile_items-text">5.3.2 - Servlet 和 action</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#5-4-自定义拦截器"><span class="toc_mobile_items-text">5.4 - 自定义拦截器</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-4-1-继承类"><span class="toc_mobile_items-text">5.4.1 - 继承类</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-4-2-重写方法"><span class="toc_mobile_items-text">5.4.2 - 重写方法</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-4-3-建立关系"><span class="toc_mobile_items-text">5.4.3 - 建立关系</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-4-4-放不拦截某些方法"><span class="toc_mobile_items-text">5.4.4 - 放不拦截某些方法</span></a></li></ol></li></ol></li></ol></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-text">Struts</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#一、Struts2-概述"><span class="toc-text">一、Struts2 概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-简单案例"><span class="toc-text">1.1 - 简单案例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-1-引入-Jar-包"><span class="toc-text">1.1.1 - 引入 Jar 包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-2-新建-struts-xml"><span class="toc-text">1.1.2 - 新建 struts.xml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-3-配置-action"><span class="toc-text">1.1.3 - 配置 action</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-4-配置-filter"><span class="toc-text">1.1.4 - 配置 filter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-5-书写-Java-文件"><span class="toc-text">1.1.5 - 书写 Java 文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-过滤器"><span class="toc-text">1.2 - 过滤器</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#三、数据封装"><span class="toc-text">三、数据封装</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-属性驱动"><span class="toc-text">3.1 - 属性驱动</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-模型驱动"><span class="toc-text">3.2 - 模型驱动</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-1-向值栈放对象"><span class="toc-text">4.3.1 - 向值栈放对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-2-向值栈放-List-对象"><span class="toc-text">4.3.2 - 向值栈放 List 对象</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4-从值栈获取数据"><span class="toc-text">4.4 - 从值栈获取数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-1-获取字符串"><span class="toc-text">4.4.1 - 获取字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-2-获取对象"><span class="toc-text">4.4.2 - 获取对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-3-获取-List-对象"><span class="toc-text">4.4.3 - 获取 List 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-4-其他操作"><span class="toc-text">4.4.4 - 其他操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#获取-setter-方法存放的数据"><span class="toc-text">- 获取 setter 方法存放的数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取-push-方法存放的数据"><span class="toc-text">- 获取 push 方法存放的数据</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-5-两种符号的使用"><span class="toc-text">4.5 - 两种符号的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-1"><span class="toc-text">4.5.1 -</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-2"><span class="toc-text">4.5.2 - %</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#五、拦截器"><span class="toc-text">五、拦截器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-概述"><span class="toc-text">5.1 - 概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-底层原理"><span class="toc-text">5.2 - 底层原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-重要的概念"><span class="toc-text">5.3 - 重要的概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-1-过滤器和拦截器"><span class="toc-text">5.3.1 - 过滤器和拦截器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-2-Servlet-和-action"><span class="toc-text">5.3.2 - Servlet 和 action</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4-自定义拦截器"><span class="toc-text">5.4 - 自定义拦截器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-1-继承类"><span class="toc-text">5.4.1 - 继承类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-2-重写方法"><span class="toc-text">5.4.2 - 重写方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-3-建立关系"><span class="toc-text">5.4.3 - 建立关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-4-放不拦截某些方法"><span class="toc-text">5.4.4 - 放不拦截某些方法</span></a></li></ol></li></ol></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(https://5b0988e595225.cdn.sohucs.com/images/20190831/84729f5c5bb346208416445feb485df6.jpeg)"><div id="post-info"><div id="post-title"><div class="posttitle">Struts2</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-02-01</time><span class="post-meta__separator">|</span><span><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Note/">Note</a></span><div class="post-meta-wordcount"><i class="fa fa-file-word-o post-meta__icon fa-fw" aria-hidden="true"></i><span>Word count:</span><span class="word-count">2.4k</span><span class="post-meta__separator">|</span><i class="fa fa-clock-o post-meta__icon fa-fw" aria-hidden="true"></i><span>Reading time: 9 min</span><div class="post-meta-pv-cv"><span class="post-meta__separator">|</span><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>Post View:</span><span id="busuanzi_value_page_pv"></span></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><html><head></head><body><h1 style="
           font-size: 60px;
           font-weight: bolder;
           border: none;
           "><center>Struts</center></h1>



<h1 id="一、Struts2-概述"><a href="#一、Struts2-概述" class="headerlink" title="一、Struts2 概述"></a>一、Struts2 概述</h1><blockquote>
<ul>
<li>应用于 <code>JavaEE</code> 三层结构中 <code>web</code> 层框架</li>
<li><code>Struts2</code> 框架是在 <code>Struts1</code> 和 <code>WebWork</code> 基础之上发展的全新框架</li>
<li>有一个过滤器，根据不同的操作，在类里面写不同的方法</li>
</ul>
</blockquote>
<h2 id="1-1-简单案例"><a href="#1-1-简单案例" class="headerlink" title="1.1 - 简单案例"></a>1.1 - 简单案例</h2><h3 id="1-1-1-引入-Jar-包"><a href="#1-1-1-引入-Jar-包" class="headerlink" title="1.1.1 - 引入 Jar 包"></a>1.1.1 - 引入 Jar 包</h3><blockquote>
<ul>
<li><code>asm-7.1.jar</code></li>
<li><code>asm-commons-7.1.jar</code></li>
<li><code>asm-tree-7.1.jar</code></li>
<li><code>commons-fileupload-1.4.jar</code></li>
<li><code>commons-io-2.6.jar</code></li>
<li><code>commons-lang3-3.8.1.jar</code></li>
<li><code>freemarker-2.3.28.jar</code></li>
<li><code>javassist-3.20.0-GA.jar</code></li>
<li><code>log4j-api-2.12.1.jar</code></li>
<li><code>log4j-core-2.12.1.jar</code></li>
<li><code>ognl-3.1.26.jar</code></li>
<li><code>struts2-core-2.5.22.jar</code></li>
</ul>
</blockquote>
<h3 id="1-1-2-新建-struts-xml"><a href="#1-1-2-新建-struts-xml" class="headerlink" title="1.1.2 - 新建 struts.xml"></a>1.1.2 - 新建 struts.xml</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">xml</div></div><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"><!--?xml version="1.0" encoding="UTF-8" ?--></span></span><br><span class="line"><span class="meta">struts</span> <span class="meta-keyword">PUBLIC</span></span><br><span class="line"><span class="meta">  <span class="meta-string">"-//Apache Software Foundation//DTD Struts Configuration 2.5//EN"</span></span></span><br><span class="line"><span class="meta">  <span class="meta-string">"http://struts.apache.org/dtds/struts-2.5.dtd"</span>></span></span><br><span class="line"></span><br><span class="line">- struts.xml 文件位置固定在 src 文件夹</span><br></pre></td></tr></tbody></table></figure></div>

<h3 id="1-1-3-配置-action"><a href="#1-1-3-配置-action" class="headerlink" title="1.1.3 - 配置 action"></a>1.1.3 - 配置 action</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">xml</div></div><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag"><<span class="name">struts</span>></span></span><br><span class="line">  <span class="tag"><<span class="name">package</span> <span class="attr">name</span>=<span class="string">"···"</span> <span class="attr">extends</span>=<span class="string">"struts-default"</span> <span class="attr">namespace</span>=<span class="string">"/···"</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">action</span> <span class="attr">name</span>=<span class="string">"···"</span> <span class="attr">class</span>=<span class="string">"Java 文件全路径"</span>></span></span><br><span class="line">      <span class="tag"><<span class="name">result</span> <span class="attr">name</span>=<span class="string">"ok"</span>></span><span class="tag"><!--<span class="name"-->result</span>></span><br><span class="line">    <span class="tag"><!--<span class="name"-->action</span>></span><br><span class="line">  <span class="tag"><!--<span class="name"-->package</span>></span><br><span class="line"><span class="tag"><!--<span class="name"-->struts</span>></span><br><span class="line"></span><br><span class="line">- 在 struts.xml 文件中进行</span><br><span class="line">- 访问的基本路径相同的 action 放在同一个 package 中</span><br><span class="line">- package 的 extends 属性是固定的 struts-default</span><br><span class="line">- 外部的访问路径由 package 的 namespace 和 action 的 name 构成</span><br></pre></td></tr></tbody></table></figure></div>

<h3 id="1-1-4-配置-filter"><a href="#1-1-4-配置-filter" class="headerlink" title="1.1.4 - 配置 filter"></a>1.1.4 - 配置 filter</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">xml</div></div><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">  <span class="tag"><<span class="name">filter</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">filter-name</span>></span>struts2<span class="tag"><!--<span class="name"-->filter-name</span>></span><br><span class="line">    <span class="tag"><<span class="name">filter-class</span>></span>org.apache.struts2.dispatcher.filter.StrutsPrepareAndExecuteFilter<span class="tag"><!--<span class="name"-->filter-class</span>></span><br><span class="line">  <span class="tag"><!--<span class="name"-->filter</span>></span><br><span class="line">  <span class="tag"><<span class="name">filter-mapping</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">filter-name</span>></span>struts2<span class="tag"><!--<span class="name"-->filter-name</span>></span><br><span class="line">    <span class="tag"><<span class="name">url-pattern</span>></span>/*<span class="tag"><!--<span class="name"-->url-pattern</span>></span><br><span class="line">  <span class="tag"><!--<span class="name"-->filter-mapping</span>></span><br><span class="line"></span><br><span class="line">- 在 web.xml 文件中进行</span><br><span class="line">- filter 中的类容固定</span><br><span class="line">- filter-mapping 中配置要用到的 filter 和 要处理的路径</span><br></pre></td></tr></tbody></table></figure></div>

<h3 id="1-1-5-书写-Java-文件"><a href="#1-1-5-书写-Java-文件" class="headerlink" title="1.1.5 - 书写 Java 文件"></a>1.1.5 - 书写 Java 文件</h3><blockquote>
<p><code>Java</code> 文件要重写以下方法</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">java</div></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> 返回类型 execute() {</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div>
</blockquote>
<h2 id="1-2-过滤器"><a href="#1-2-过滤器" class="headerlink" title="1.2 - 过滤器"></a>1.2 - 过滤器</h2><blockquote>
<ul>
<li><p>外来请求首先会被汇总到过滤器</p>
</li>
<li><p>过滤器在服务器启动时创建，执行 <code>init</code> 方法</p>
</li>
<li><p>过滤器要做的事</p>
<ul>
<li><p>过滤器会获取请求路径</p>
</li>
<li><p>截取请求路径中的有效字符串</p>
</li>
<li><p>到 <code>src</code> 下面找到 <code>struts.xml</code> 使用 <code>dom4j</code> 进行解析</p>
</li>
<li><p>用截取到的字符串与 <code>struts.xml</code> 中的 <code>action</code> 进行匹配</p>
</li>
<li><p>如果匹配到对应的 <code>action</code> 则根据其中的全路径，反射创建对应 <code>Java</code> 类</p>
<ul>
<li><p>反射：</p>
</li>
<li><pre><code class="java">Class clazz = Class.forName(<span class="string">"全路径"</span>);
<span class="comment">// 反射创建类</span>
Method m = clazz.getMethod(<span class="string">"execute"</span>);
<span class="comment">// 获取方法</span>
Object obj = m.invoke();
<span class="comment">// 方法执行并获取返回值</span>
<!--￼<span class="number">4</span>-->
</code></pre>
</li>
</ul>
</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Code</div></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></tbody></table></figure></div></li>
<li><p>将返回值与该 <code>action</code> 中的 <code>result</code> 进行匹配</p>
<ul>
<li>如果匹配成功，则跳转到相应页面<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Code</div></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 1.2.1 - init()</span><br><span class="line"></span><br><span class="line">加载自己创建的配置文件和 `struts2` 自带配置文件</span><br><span class="line"></span><br><span class="line">### 1.2.2 - doFilter()</span><br><span class="line"></span><br><span class="line">**request = warpRequest(request);**</span><br><span class="line"></span><br><span class="line">增强</span><br><span class="line"></span><br><span class="line">## 1.3 - struts.xml</span><br><span class="line"></span><br><span class="line">### 1.3.1 - <package\></package\></span><br><span class="line"></span><br><span class="line">类似于代码包，用于区分不同的 `action` ，必须首先写 `package` 标签，在 `package` 标签中才能配置 `action`，在一个 `package` 中可以有多个 `action`</span><br><span class="line"></span><br><span class="line">#### - name</span><br><span class="line"></span><br><span class="line">和功能本身没有任何关系，只要重复，可以随便取</span><br><span class="line"></span><br><span class="line">#### - extends</span><br><span class="line"></span><br><span class="line">属性值是固定的，写了这个属性之后，在 `package` 中配置的 `action` 才具有 `action` 该有的功能</span><br><span class="line"></span><br><span class="line">#### - namespace</span><br><span class="line"></span><br><span class="line">要和 `action` 标签的 `name` 构成访问路径，默认值是 `/`</span><br><span class="line"></span><br><span class="line">### 1.3.2 - <action\></action\></span><br><span class="line"></span><br><span class="line">配置 `action` 的访问路径及 `Java` 文件的绑定</span><br><span class="line"></span><br><span class="line">#### - name</span><br><span class="line"></span><br><span class="line">要和 `package` 标签的 `name` 构成访问路径</span><br><span class="line"></span><br><span class="line">可以用通配符 ***** 进行匹配</span><br><span class="line"></span><br><span class="line">#### - class</span><br><span class="line"></span><br><span class="line">`action` 所绑定 `Java` 文件的全路径</span><br><span class="line"></span><br><span class="line">#### - method</span><br><span class="line"></span><br><span class="line">指定执行 `Java` 文件中的哪一个方法</span><br><span class="line"></span><br><span class="line">在通配符模式下，用 `{1}` 来获取方法，获取到的方法名即 ***** 所代替的字符串</span><br><span class="line"></span><br><span class="line">#### - action 的另外两种编写方式</span><br><span class="line"></span><br><span class="line">- `implements Action`</span><br><span class="line">- `extends ActionSupport`</span><br><span class="line"></span><br><span class="line">### 1.3.3 - <result\></result\></span><br><span class="line"></span><br><span class="line">根据 `action` 方法返回值，配置到不同的路径</span><br><span class="line"></span><br><span class="line">#### - name</span><br><span class="line"></span><br><span class="line">和 `action` 返回值一样</span><br><span class="line"></span><br><span class="line">#### - type</span><br><span class="line"></span><br><span class="line">指定如何到达配置路径的方法</span><br><span class="line"></span><br><span class="line">- `dispatcher` 请求转发，默认</span><br><span class="line">- `redirect` 重定向</span><br><span class="line">- `chain` 转发到 `action`</span><br><span class="line">- `redirectAction` 重定向到 `Action`</span><br><span class="line"></span><br><span class="line">### 1.3.4 - <constant\></constant\></span><br><span class="line"></span><br><span class="line">#### - name</span><br><span class="line"></span><br><span class="line">#### - value</span><br><span class="line"></span><br><span class="line">另外两种常量修改方式</span><br><span class="line"></span><br><span class="line">- 在 `src` 下创建 `struts.properties` </span><br><span class="line">- 在 `web.xml` 配置</span><br><span class="line"></span><br><span class="line">### 1.3.5 - <include\></include\></span><br><span class="line"></span><br><span class="line">####  - file</span><br><span class="line"></span><br><span class="line">文件路径</span><br><span class="line"></span><br><span class="line">### 1.3.6 - <global-results\></global-results\></span><br><span class="line"></span><br><span class="line">当有多个 `action` 返回值相同、且其 `result` 返回的内容也相同，则可以使用这个</span><br><span class="line"></span><br><span class="line"># 二、数据处理</span><br><span class="line"></span><br><span class="line">## 2.1 - 使用 ActionContext 类</span><br><span class="line"></span><br><span class="line">- 需要创建 `ActionContext` 对象</span><br><span class="line">- 不是 `new` 出来的</span><br><span class="line"></span><br><span class="line">## 2.2 - 使用 ServletActionContext 类</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 2.3 - 使用 Interface 注入</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">public class A implements ServletRequestAware {</span><br><span class="line"> </span><br><span class="line"> private HttpServletRequest request;</span><br><span class="line"> </span><br><span class="line"> public void setServletRequest(HttpServletRequest request) {</span><br><span class="line">   this.request = request;</span><br><span class="line"> }</span><br><span class="line"> </span><br><span class="line">} </span><br></pre></td></tr></tbody></table></figure></div>
</li>
</ul>
</li>
</ul>
</blockquote>
<h1 id="三、数据封装"><a href="#三、数据封装" class="headerlink" title="三、数据封装"></a>三、数据封装</h1><h2 id="3-1-属性驱动"><a href="#3-1-属性驱动" class="headerlink" title="3.1 - 属性驱动"></a>3.1 - 属性驱动</h2><blockquote>
<ul>
<li>直接把表单提交属性封装到 <code>action</code> 属性</li>
<li>实现步骤<ul>
<li>在 <code>action</code> 成员变量位置定义变量 – 变量名和表单输入项的 <code>name</code> 属性值一样</li>
<li>生成变量的 <code>setter</code> 和 <code>getter</code>  </li>
</ul>
</li>
<li>使用属性封装获取表单数据到属性里面，不能把数据直接封装到实体类</li>
</ul>
</blockquote>
<h2 id="3-2-模型驱动"><a href="#3-2-模型驱动" class="headerlink" title="3.2 - 模型驱动"></a>3.2 - 模型驱动</h2><blockquote>
<ul>
<li><p>使用模型驱动方式，可以直接把表单数据封装到实体类对象里面</p>
</li>
<li><p>实现步骤</p>
<ul>
<li><p><code>action</code> 实现接口 <code>ModelDriven</code> </p>
</li>
<li><p>实现接口里的方法 <code>getModel</code> </p>
</li>
<li><p>在 <code>action</code> 里创建实体类对象</p>
</li>
<li><p>```java<br>public class A extends ActionSupport implements ModelDriven <类型> {</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Code</div></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  private 类型 a = new 类型();</span><br><span class="line"></span><br><span class="line">  public 类型 getModel() {</span><br><span class="line"></span><br><span class="line">    return a;</span><br><span class="line"></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></div></li>
</ul>
</li>
<li><p>属性驱动和模型封装不能同时使用，如果同时使用，只会执行模型封装</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Code</div></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 3.3 - 表达式封装</span><br><span class="line"></span><br><span class="line">- 实现过程</span><br><span class="line">  - 使用表达式封装可以把表单数据封装到实体类对象里面</span><br><span class="line">  - 在 `action` 里面声明实体类</span><br><span class="line">  - 生成实体类的 `setter` 和 `getter` 方法</span><br><span class="line"></span><br><span class="line"># 四、Ognl 概述</span><br><span class="line"></span><br><span class="line">- `EL` 表达式：在 `JSP` 中获取域对象里面的值</span><br><span class="line">- `Ognl` 表达式：在 `Struts2` 实现值栈数据</span><br><span class="line">  - 一般把 `Ognl` 在 `Struts2` 里操作，和 `Struts2` 标签一起使用操作值栈</span><br><span class="line">  - 不是 `Struts2` 的一部分，只是经常和 `Struts2` 一起使用</span><br><span class="line"></span><br><span class="line">## 4.1 - 获取值栈对象</span><br><span class="line"></span><br><span class="line">### 4.1.1 - 常用方式</span><br><span class="line"></span><br><span class="line">使用 `ActionContext` 类里面的方法得到值栈对象</span><br><span class="line"></span><br><span class="line">- 获取 `ActionContext` 对象</span><br><span class="line">  - `ActionContext context = ActionContext.getContext();`</span><br><span class="line">- 调用方法得到值栈对象</span><br><span class="line">  - `ValueStack stack = context.getValueStack();`</span><br><span class="line"></span><br><span class="line">## 4.2 - 值栈内部结构</span><br><span class="line"></span><br><span class="line">### 4.2.1 - 第一部分：root</span><br><span class="line"></span><br><span class="line">- 结构是 `List` 集合</span><br><span class="line">- 一般操作的都是 `root` 里的数据</span><br><span class="line"></span><br><span class="line">### 4.2.2 - 第二部分： context</span><br><span class="line"></span><br><span class="line">- 结构是 `Map` 集合</span><br><span class="line">- 很少操作</span><br><span class="line">- 几个键值对</span><br><span class="line">  - `request`：`request` 引用</span><br><span class="line">  - `session`：`HttpSession` 引用</span><br><span class="line">  - `application`： `ServletContext` 引用</span><br><span class="line">  - `parameters`：传递相关参数</span><br><span class="line">  - `attr`： 获取域对象</span><br><span class="line"></span><br><span class="line">## 4.3 - 向值栈放数据</span><br><span class="line"></span><br><span class="line">**调用 set()**</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">ActionContext context = ActionContext.getContext();</span><br><span class="line"></span><br><span class="line">ValueStack stack = context.getValueStack();</span><br><span class="line"></span><br><span class="line">stack.set("key", "value"); </span><br></pre></td></tr></tbody></table></figure></div>
</li>
</ul>
</blockquote>
<p><strong>调用 push()</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">java</div></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ActionContext context = ActionContext.getContext();</span><br><span class="line"></span><br><span class="line">ValueStack stack = context.getValueStack();</span><br><span class="line"></span><br><span class="line">stack.put(<span class="string">""</span>);</span><br></pre></td></tr></tbody></table></figure></div>

<p><strong>生成 get()</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">java</div></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>{</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div>

<h3 id="4-3-1-向值栈放对象"><a href="#4-3-1-向值栈放对象" class="headerlink" title="4.3.1 - 向值栈放对象"></a>4.3.1 - 向值栈放对象</h3><blockquote>
<ul>
<li>定义对象变量</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">java</div></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> User user = <span class="keyword">new</span> User();</span><br></pre></td></tr></tbody></table></figure></div>

<ul>
<li>生成变量的 <code>get</code> 方法</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">java</div></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">()</span> </span>{</span><br><span class="line"> <span class="keyword">return</span> user;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div>

<ul>
<li>在执行的方法里面向对象中设置值</li>
</ul>
</blockquote>
<h3 id="4-3-2-向值栈放-List-对象"><a href="#4-3-2-向值栈放-List-对象" class="headerlink" title="4.3.2 - 向值栈放 List 对象"></a>4.3.2 - 向值栈放 List 对象</h3><blockquote>
<ul>
<li>定义 <code>List</code> 集合</li>
<li>生成变量的 <code>getter</code> </li>
<li>在执行的方法里面向 <code>List</code> 集合设置值</li>
</ul>
</blockquote>
<h2 id="4-4-从值栈获取数据"><a href="#4-4-从值栈获取数据" class="headerlink" title="4.4 - 从值栈获取数据"></a>4.4 - 从值栈获取数据</h2><blockquote>
<ul>
<li>使用 <code>Struts2</code> 的标签 + <code>Ognl</code> 表达式获取值栈数据<ul>
<li><code><s:property value="Ognl 表达式"></s:property></code></li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="4-4-1-获取字符串"><a href="#4-4-1-获取字符串" class="headerlink" title="4.4.1 - 获取字符串"></a>4.4.1 - 获取字符串</h3><p><strong>action</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">java</div></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> </span>{</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> String 变量名;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> String get变量名() {</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> 变量名;</span><br><span class="line">    </span><br><span class="line">  }</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">    </span><br><span class="line">    变量名 = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">return</span> SUCCESS;</span><br><span class="line">    </span><br><span class="line">  }</span><br><span class="line">  </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div>

<p><strong>struts.xml</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">xml</div></div><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag"><<span class="name">action</span> <span class="attr">name</span>=<span class="string">"自定义名称"</span> <span class="attr">class</span>=<span class="string">"action 全路径"</span>></span></span><br><span class="line"></span><br><span class="line">  <span class="tag"><<span class="name">result</span> <span class="attr">name</span>=<span class="string">"success"</span>></span>/返回的 jsp<span class="tag"><!--<span class="name"-->result</span>></span><br><span class="line">  </span><br><span class="line"><span class="tag"><!--<span class="name"-->action</span>></span><br></pre></td></tr></tbody></table></figure></div>

<p><strong>jsp</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">jsp</div></div><figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><s:property value="<span" class="string">"变量名"</s:property></span>/><br></pre></td></tr></tbody></table></figure></div>

<h3 id="4-4-2-获取对象"><a href="#4-4-2-获取对象" class="headerlink" title="4.4.2 - 获取对象"></a>4.4.2 - 获取对象</h3><p><strong>action</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">java</div></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> </span>{</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> 类名 对象;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> String get对象() {</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> 对象;</span><br><span class="line">    </span><br><span class="line">  }</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">    </span><br><span class="line">    对象.属性 = <span class="string">"···"</span>;</span><br><span class="line">    ···</span><br><span class="line">    对象.属性 = <span class="string">"···"</span>;</span><br><span class="line">    <span class="keyword">return</span> SUCCESS;</span><br><span class="line">    </span><br><span class="line">  }</span><br><span class="line">  </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div>

<p><strong>struts.xml</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">xml</div></div><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag"><<span class="name">action</span> <span class="attr">name</span>=<span class="string">"自定义名称"</span> <span class="attr">class</span>=<span class="string">"action 全路径"</span>></span></span><br><span class="line"></span><br><span class="line">  <span class="tag"><<span class="name">result</span> <span class="attr">name</span>=<span class="string">"success"</span>></span>/返回的 jsp<span class="tag"><!--<span class="name"-->result</span>></span><br><span class="line">  </span><br><span class="line"><span class="tag"><!--<span class="name"-->action</span>></span><br></pre></td></tr></tbody></table></figure></div>

<p><strong>jsp</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">jsp</div></div><figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><s:property value="<span" class="string">"对象.属性"</s:property></span>/><br><span class="line">···</span><br><span class="line"><s:property value="<span" class="string">"对象.属性"</s:property></span>/><br></pre></td></tr></tbody></table></figure></div>

<h3 id="4-4-3-获取-List-对象"><a href="#4-4-3-获取-List-对象" class="headerlink" title="4.4.3 - 获取 List 对象"></a>4.4.3 - 获取 List 对象</h3><p><strong>action</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">java</div></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span></span>{</span><br><span class="line">  </span><br><span class="line">  List<类型> list = <span class="keyword">new</span> List();</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> </span>{</span><br><span class="line">    </span><br><span class="line">    类型 对象<span class="number">1</span> = <span class="keyword">new</span> 类型();</span><br><span class="line">    对象<span class="number">1</span>.属性 = <span class="string">"···"</span>;</span><br><span class="line">    ···</span><br><span class="line">    对象<span class="number">1</span>.属性 = <span class="string">"···"</span>;  </span><br><span class="line">    </span><br><span class="line">    类型 对象<span class="number">2</span> = <span class="keyword">new</span> 类型();</span><br><span class="line">    对象<span class="number">2</span>.属性 = <span class="string">"···"</span>;</span><br><span class="line">    ···</span><br><span class="line">    对象<span class="number">2</span>.属性 = <span class="string">"···"</span>;  </span><br><span class="line">    </span><br><span class="line">    list.add(对象<span class="number">1</span>);</span><br><span class="line">    list.add(对象<span class="number">2</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> SUCCESS;</span><br><span class="line">    </span><br><span class="line">  }</span><br><span class="line">  </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div>

<p><strong>struts.xml</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">xml</div></div><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag"><<span class="name">action</span> <span class="attr">name</span>=<span class="string">"自定义名称"</span> <span class="attr">class</span>=<span class="string">"action 全路径"</span>></span></span><br><span class="line"></span><br><span class="line">  <span class="tag"><<span class="name">result</span> <span class="attr">name</span>=<span class="string">"success"</span>></span>/返回的 jsp<span class="tag"><!--<span class="name"-->result</span>></span><br><span class="line">  </span><br><span class="line"><span class="tag"><!--<span class="name"-->action</span>></span><br></pre></td></tr></tbody></table></figure></div>

<p><strong>jsp</strong></p>
<p><strong>第一种方式</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">jsp</div></div><figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><s:property value="<span" class="string">"list[0].属性"</s:property></span>/><br><span class="line">···</span><br><span class="line"><s:property value="<span" class="string">"list[0].属性"</s:property></span>/><br><span class="line"></span><br><span class="line"><s:property value="<span" class="string">"list[1].属性"</s:property></span>/><br><span class="line">···</span><br><span class="line"><s:property value="<span" class="string">"list[1].属性"</s:property></span>/><br></pre></td></tr></tbody></table></figure></div>

<p><strong>第二种方式</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang"></div></div><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><s:iterator value="<span" class="string">"list"</s:iterator></span>><br><span class="line">	<s:property value="<span" class="string">"属性"</s:property></span>/><br><span class="line">  ···</span><br><span class="line">	<s:property value="<span" class="string">"属性"</s:property></span>/><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></div>

<p><strong>第三种方式</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang"></div></div><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><s:iterator value="<span" class="string">"list"</s:iterator></span> <span class="keyword">var</span>=<span class="string">"自定义名称"</span>><br><span class="line">	<s:property value="<span" class="string">"#自定义名称.属性"</s:property></span>/><br><span class="line">  ···</span><br><span class="line">	<s:property value="<span" class="string">"#自定义名称.属性"</s:property></span>/><br><span class="line"></span><br><span class="line">  </span><br><span class="line">- var 会被临时放入 context,需要使用特殊符号 `#` 才能取到</span><br></pre></td></tr></tbody></table></figure></div>

<h3 id="4-4-4-其他操作"><a href="#4-4-4-其他操作" class="headerlink" title="4.4.4 - 其他操作"></a>4.4.4 - 其他操作</h3><h4 id="获取-setter-方法存放的数据"><a href="#获取-setter-方法存放的数据" class="headerlink" title="- 获取 setter 方法存放的数据"></a>- 获取 setter 方法存放的数据</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">jsp</div></div><figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><s:property value="<span" class="string">"栈的key"</s:property></span>/><br></pre></td></tr></tbody></table></figure></div>

<h4 id="获取-push-方法存放的数据"><a href="#获取-push-方法存放的数据" class="headerlink" title="- 获取 push 方法存放的数据"></a>- 获取 push 方法存放的数据</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">jsp</div></div><figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><s:property value="<span" class="string">"[下标].top"</s:property></span>/><br><span class="line"></span><br><span class="line">- 因为 push 进栈的没有名字，默认存放在 top 数组</span><br></pre></td></tr></tbody></table></figure></div>

<h2 id="4-5-两种符号的使用"><a href="#4-5-两种符号的使用" class="headerlink" title="4.5 - 两种符号的使用"></a>4.5 - 两种符号的使用</h2><h3 id="4-5-1"><a href="#4-5-1" class="headerlink" title="4.5.1 -"></a>4.5.1 -</h3><p><strong>先在 action 向域中添加对象</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">java</div></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">  </span><br><span class="line">  HttpServletRequest request = ServletActionContext.getRequest();</span><br><span class="line">  request.setAttribute(key, value);</span><br><span class="line">  <span class="keyword">return</span> SUCCESS;</span><br><span class="line">  </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div>

<p><strong>struts.xml</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">xml</div></div><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag"><<span class="name">action</span> <span class="attr">name</span>=<span class="string">"自定义名称"</span> <span class="attr">class</span>=<span class="string">"action 全路径"</span>></span></span><br><span class="line"></span><br><span class="line">  <span class="tag"><<span class="name">result</span> <span class="attr">name</span>=<span class="string">"success"</span>></span>/返回的 jsp<span class="tag"><!--<span class="name"-->result</span>></span><br><span class="line">  </span><br><span class="line"><span class="tag"><!--<span class="name"-->action</span>></span><br></pre></td></tr></tbody></table></figure></div>

<p><strong>jsp</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">jsp</div></div><figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><s:property value="<span" class="string">"#context域的key.域对象名称"</s:property></span>/><br></pre></td></tr></tbody></table></figure></div>

<h3 id="4-5-2"><a href="#4-5-2" class="headerlink" title="4.5.2 - %"></a>4.5.2 - %</h3><blockquote>
<p>在 <code>struts2</code> 标签里使用 <code>Ognl</code> 表达式，如果直接在 <code>struts2</code> 表单标签里面使用 <code>Ognl</code> 表达式不识别，只有 % 之后才会识别</p>
</blockquote>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang"></div></div><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><s:textfield name value="%{#context域的key.域对象名称}"></s:textfield></span><br></pre></td></tr></tbody></table></figure></div>

<h1 id="五、拦截器"><a href="#五、拦截器" class="headerlink" title="五、拦截器"></a>五、拦截器</h1><h2 id="5-1-概述"><a href="#5-1-概述" class="headerlink" title="5.1 - 概述"></a>5.1 - 概述</h2><blockquote>
<ul>
<li><code>struts2</code> 是框架，封装了很多功能，<code>struts2</code> 里面封装的功能都是在拦截器里面</li>
<li><code>struts2</code> 里面封装了很多的功能，又很多拦截器，不是每次这些拦截器都执行，每次执行默认的拦截器</li>
<li>默认拦截器位置：<code>struts2-core-version.jar/struts-default.xml</code></li>
<li>在 <code>action</code> 创建之后，执行之前调用</li>
</ul>
</blockquote>
<h2 id="5-2-底层原理"><a href="#5-2-底层原理" class="headerlink" title="5.2 - 底层原理"></a>5.2 - 底层原理</h2><p><strong>两大思想</strong></p>
<blockquote>
<ul>
<li><code>Aop</code> 思想</li>
<li>职责链设计模式<ul>
<li>要执行多个操作，有添加、修改、删除</li>
<li>首先执行添加操作，添加之后执行修改操作，最后执行删除操作</li>
</ul>
</li>
</ul>
</blockquote>
<p><strong>通过 AOP 将拦截器加入到执行过程</strong></p>
<h2 id="5-3-重要的概念"><a href="#5-3-重要的概念" class="headerlink" title="5.3 - 重要的概念"></a>5.3 - 重要的概念</h2><h3 id="5-3-1-过滤器和拦截器"><a href="#5-3-1-过滤器和拦截器" class="headerlink" title="5.3.1 - 过滤器和拦截器"></a>5.3.1 - 过滤器和拦截器</h3><blockquote>
<ul>
<li>过滤器：理论上可以拦截任意内容</li>
<li>拦截器：只可以拦截 <code>action</code></li>
</ul>
</blockquote>
<h3 id="5-3-2-Servlet-和-action"><a href="#5-3-2-Servlet-和-action" class="headerlink" title="5.3.2 - Servlet 和 action"></a>5.3.2 - Servlet 和 action</h3><blockquote>
<ul>
<li><code>servlet</code> 默认第一次访问时创建，创建一次，单实例对象</li>
<li><code>action</code> 每次访问时创建，创建多次，多实例对象 </li>
</ul>
</blockquote>
<h2 id="5-4-自定义拦截器"><a href="#5-4-自定义拦截器" class="headerlink" title="5.4 - 自定义拦截器"></a>5.4 - 自定义拦截器</h2><h3 id="5-4-1-继承类"><a href="#5-4-1-继承类" class="headerlink" title="5.4.1 - 继承类"></a>5.4.1 - 继承类</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">java</div></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> <span class="keyword">extends</span> <span class="title">AbstractInterceptor</span> </span>{</span><br><span class="line">  </span><br><span class="line">}</span><br><span class="line"><span class="comment">// 而</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AbstractInterceptor</span> <span class="keyword">implements</span> <span class="title">Interceptor</span> </span>{</span><br><span class="line">  </span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">- 工作中推荐下面</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> <span class="keyword">extends</span> <span class="title">MethodFilterInterceptor</span> </span>{</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">protected</span> String <span class="title">doIntercept</span><span class="params">(ActionInvocation invocation)</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">    </span><br><span class="line">  }</span><br><span class="line">  </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div>

<h3 id="5-4-2-重写方法"><a href="#5-4-2-重写方法" class="headerlink" title="5.4.2 - 重写方法"></a>5.4.2 - 重写方法</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">java</div></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function">String <span class="title">intercept</span><span class="params">(ActionInvocation invocation)</span></span>;</span><br></pre></td></tr></tbody></table></figure></div>

<h3 id="5-4-3-建立关系"><a href="#5-4-3-建立关系" class="headerlink" title="5.4.3 - 建立关系"></a>5.4.3 - 建立关系</h3><blockquote>
<ul>
<li>在要拦截的 <code>action</code> 标签所在的 <code>package</code> 标签里面声明拦截器</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">xml</div></div><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag"><<span class="name">interceptors</span>></span></span><br><span class="line">	<span class="tag"><<span class="name">interceptor</span> <span class="attr">name</span>=<span class="string">"自定义name"</span> <span class="attr">class</span>=<span class="string">"拦截器java文件全路径"</span>/></span></span><br><span class="line"><span class="tag"><!--<span class="name"-->interceptors</span>></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></div>

<ul>
<li>在具体的 <code>action</code> 标签里面使用声明的拦截器</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">xml</div></div><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag"><<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">"上面的自定义name"</span>/></span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></div>

<ul>
<li><p>如果在 <code>struts.xml</code> 中使用自定义的，则默认拦截器不会执行</p>
<ul>
<li>解决方法：手动引入默认拦截器</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">xml</div></div><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag"><<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">"paramsPrepareParamsStack"</span>/></span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></div>
</li>
<li><p>自定义拦截器会对 <code>action</code> 里所有方法都拦截</p>
</li>
</ul>
</blockquote>
<h3 id="5-4-4-放不拦截某些方法"><a href="#5-4-4-放不拦截某些方法" class="headerlink" title="5.4.4 - 放不拦截某些方法"></a>5.4.4 - 放不拦截某些方法</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">xml</div></div><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag"><<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">"上面的自定义name"</span>></span></span><br><span class="line">	<span class="tag"><<span class="name">param</span> <span class="attr">name</span>=<span class="string">"excludeMethods"</span>></span>写方法名，多个用逗号隔开<span class="tag"><!--<span class="name"-->param</span>></span><br><span class="line"><span class="tag"><!--<span class="name"-->interceptor-ref</span>></span><br></pre></td></tr></tbody></table></figure></div></body></html></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Cying-承影</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://cyingk.github.io/2020/02/01/Struts2/">http://cyingk.github.io/2020/02/01/Struts2/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/JavaEE/">JavaEE    </a></div><div class="post_share"><div class="social-share" data-image="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=2597327423,2034793762&amp;fm=26&amp;gp=0.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/02/07/Vuforia/"><img class="prev_cover lazyload" data-src="https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=775631544,4140499919&amp;fm=26&amp;gp=0.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Previous Post</div><div class="prev_info"><span>Vuforia</span></div></a></div><div class="next-post pull_right"><a href="/2020/01/31/Http_Servlet/"><img class="next_cover lazyload" data-src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=3567041170,3790666556&amp;fm=26&amp;gp=0.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Next Post</div><div class="next_info"><span>Http Servlet</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> Recommend</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/02/20/Mybatis/" title="MyBatis"><img class="relatedPosts_cover lazyload"data-src="https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=575314515,4268715674&fm=26&gp=0.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-02-20</div><div class="relatedPosts_title">MyBatis</div></div></a></div><div class="relatedPosts_item"><a href="/2020/02/16/SpringMVC/" title="SpringMVC"><img class="relatedPosts_cover lazyload"data-src="https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=790255512,3591398303&fm=26&gp=0.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-02-16</div><div class="relatedPosts_title">SpringMVC</div></div></a></div><div class="relatedPosts_item"><a href="/2020/02/15/Hibernate/" title="Hibernate"><img class="relatedPosts_cover lazyload"data-src="https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=607365457,3589909035&fm=26&gp=0.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-02-15</div><div class="relatedPosts_title">Hibernate</div></div></a></div><div class="relatedPosts_item"><a href="/2020/01/31/Http_Servlet/" title="Http Servlet"><img class="relatedPosts_cover lazyload"data-src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=3567041170,3790666556&fm=26&gp=0.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-01-31</div><div class="relatedPosts_title">Http Servlet</div></div></a></div><div class="relatedPosts_item"><a href="/2020/01/27/Spring/" title="Spring"><img class="relatedPosts_cover lazyload"data-src="https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=2516020377,3847466993&fm=11&gp=0.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-01-27</div><div class="relatedPosts_title">Spring</div></div></a></div></div><div class="clear_both"></div></div></div></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2020 By Cying-承影</div><div class="framework-info"><span>Driven </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="footer_custom_text">自从厌倦于追寻，我已学会一觅即中；自从一股逆风袭来，我已能抗御八面来风,驾舟而行。</div><div class="icp"><a href="http://narpro.top" target="_blank" rel="noopener"><img class="icp-icon" src="/img/icp.png"><span></span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="Read Mode"></i><i class="fa fa-plus" id="font_plus" title="Increase font size"></i><i class="fa fa-minus" id="font_minus" title="Decrease font size"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="Traditional Chinese and Simplified Chinese Conversion" target="_self">简</a><i class="darkmode fa fa-moon-o" id="darkmode" title="Dark Mode"></i></div><div id="rightside-config-show"><div id="rightside_config" title="Setting"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="Table of Contents" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="Back to top" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/fireworks.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script id="ribbon_piao" mobile="true" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/piao.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script></body></html>